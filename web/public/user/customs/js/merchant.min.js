"use strict";function readFileOnChange(e,t,a){var n,r;(n=e.files[0])&&(r=new FileReader,r.onload=function(){n.name.match(/.(png|jpg|jpeg|gif|bmp)$/i)?t.attr({src:r.result}):t.attr({src:a})},r.readAsDataURL(n))}function restrictNumberToPrefdecimalOnInput(e){var t=$("#currency_type").val();restrictNumberToPrefdecimal(e,t)}if($(".main-containt").find("#merchantCreate").length&&($(document).on("change","#logo",function(){readFileOnChange(this,$("#merchantLogoPreview"),merchantDefaultLogo)}),$(document).on("submit","#merchantCreateForm",function(){$(".spinner").removeClass("d-none"),$("#merchantCreateSubmitBtn").attr("disabled",!0),$("#merchantCreateSubmitBtnText").text(submitButtonText)})),$(".main-containt").find("#merchantUpdate").length&&($(document).on("change","#logo",function(){null!=merchantLogo&&readFileOnChange(this,$("#merchantLogoPreviewEdit"),merchantDefaultLogo),readFileOnChange(this,$("#merchantLogoPreview"),merchantDefaultLogo)}),$("#currency").on("change",function(){let e=$(this).val();"Approved"==currentStatus&&currencyCurrencyId!=e?$("#currencyChangeWarning").removeClass("d-none"):$("#currencyChangeWarning").addClass("d-none")}),$(document).on("submit","#merchantUpdateForm",function(){$(".spinner").removeClass("d-none"),$("#merchantUpdateSubmitBtn").attr("disabled",!0),$("#merchantUpdateSubmitBtnText").text(submitButtonText)})),$(".main-containt").find("#merchantIndex").length){function determineDecimalPoint(){let e=$("#currency_type").val();"crypto"==e?$("#amount").attr("placeholder",CRYPTODP):"fiat"==e&&$("#amount").attr("placeholder",FIATDP)}function executeExpressMerchantQrCode(e,t,a){""!=e&&""!=t&&""!=a&&$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:expressMerchantQrCodeUrl,dataType:"json",data:{merchantId:t,merchantDefaultCurrencyId:a,clientId:e},beforeSend:function(){$(".express-merchant-qr-div").addClass("d-none"),$(".loader-img").removeClass("d-none")}}).done(function(e){e.status&&($(".express-merchant-qr-div").removeClass("d-none"),$(".loader-img").addClass("d-none"),$(".expressMerchantQrCodeImg").attr("src",e.imgSource))}).fail(function(e){Swal.fire(failedText,JSON.parse(e.responseText).message,"error").then(e=>{e.isConfirmed&&window.location.reload()})})}function remove_copy(){$("#copy-parent-div-client").removeClass("show-copied")}function remove_copy_secret(){$("#copy-parent-div-client-secret").removeClass("show-copied")}jQuery.fn.delay=function(e,t){return this.each(function(){setTimeout(t,e)})},$(document).on("click",".generate-standard-payment-form",function(){var e=$("#merchant_id").val(),t=$("#item_name").val(),a=$("#order").val(),n=$("#amount").val(),r=$("#custom").val(),c=$("#merchant_main_id").val(),o=$("#currency_id").val(),i='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>'+appName+'</title><script src="'+flasheshDarkPath+'"></script><link rel="stylesheet" href="'+bootstrapCssPath+'"><link rel="stylesheet" href="'+styleCssPath+'"><link rel="shortcut icon" href="'+favIcon+'"/><link rel="stylesheet" href="'+fontLink+'"><style>body{font-family: "Plus Jakarta Sans", sans-serif;}h3 {font-weight: 500;font-family: "Plus Jakarta Sans", sans-serif !important;}p {font-weight: 400;font-family: "Plus Jakarta Sans", sans-serif !important;}button {font-weight: 400; font-family: "Plus Jakarta Sans", sans-serif !important;}</style></head><body class="bg-body-muted"><div class="container-fluid container-layout px-0"><div class="section-payment"><div class="payment-main-module"><h3>'+payButtonTitle+"</h3><p>"+payButtonTxt+'</p><form method="POST" action="'+paymentFormUrl+'"><input type="hidden" name="merchant" value="'+e+'" /><input type="hidden" name="merchant_id" value="'+c+'" /><input type="hidden" name="item_name" value="'+t+'" /><input type="hidden" name="currency_id" value="'+o+'" /><input type="hidden" name="order" value="'+a+'" /><input type="hidden" name="amount" value="'+n+'" /><input type="hidden" name="custom" value="'+r+'" /><button type="submit" class="btn btn-lg btn-primary"><strong>'+payNowText+'</strong></button></form></div></div></div><script src="'+jqueryPath+'"></script><script src="'+bootstrapJsPath+'"></script><script src="'+mainJsPath+'"></script></body></html>';$("#result").val(i),""!=t&&""!=a&&""!=n&&""!=r&&""!=c&&""!=o?$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:standardMerchantQrCodeUrl,dataType:"json",data:{merchantId:c,merchantDefaultCurrency:o,paymentAmount:n},beforeSend:function(){$(".merchant-qr-section").removeClass("d-none"),$(".loader-img").removeClass("d-none"),$(".merchant-qr-div").addClass("d-none")}}).done(function(e){e.status&&($(".loader-img").addClass("d-none"),$("#generate-standard-payment-form").addClass("d-none"),$(".merchant-qr-div").removeClass("d-none"),$("#qrCodeImg").attr("src",e.imgSource))}).fail(function(e){Swal.fire(failedText,JSON.parse(e.responseText).message,"error").then(e=>{e.isConfirmed&&window.location.reload()})}):(alert("Please fill out the form inputs."),$(".payment-form-qr-code").html(""))}),$(document).on("ready",function(){determineDecimalPoint()}),$("#merchantModaldetails").on("show.bs.modal",function(e){let t=SITE_URL+"/merchant/edit/"+$(e.relatedTarget).attr("data-id"),a=$(e.relatedTarget).attr("data-note"),n=$(e.relatedTarget).attr("data-logo"),r=$(e.relatedTarget).attr("data-name"),c=$(e.relatedTarget).attr("data-status"),o=$(e.relatedTarget).attr("data-site_url"),i=$(e.relatedTarget).attr("data-merchant_uuid"),d=$(e.relatedTarget).attr("data-created_at"),s=$(e.relatedTarget).attr("data-merchantCurrencyCode"),l=$(e.relatedTarget).attr("data-statusColor");$("#merchant-img").attr("src",n),$("#merchant-uuid").text(i),$("#merchant-edit-route").attr("href",t),$("#merchant-name").text(r),$("#merchant-status").text(c),$("#merchant-status-bg").removeClass(function(e,t){return(t.match(/(^|\s)bg-\S+/g)||[]).join(" ")}),$("#merchant-status-bg").addClass("bg-"+l),$("#merchant-site-url").text(o),$("#merchant-currency").text(s),$("#merchant-created-at").text(d),$("#merchant-note").text(a)}),$(document).on("click",".gearBtn",function(e){if(e.preventDefault(),"standard"==$(this).attr("data-type")){$("#item_name, #order, #amount, #custom").val(""),$("#result").val('<form method="POST" action="'+paymentFormUrl+'"><input type="hidden" name="order" id="result_order" value="#"/><input type="hidden" name="merchant" id="result_merchant" value="#"/><input type="hidden" name="merchant_id" id="result_merchant_id" value="#"/><input type="hidden" name="item_name" id="result_item_name" value="Testing payment"/><input type="hidden" name="amount" id="result_amount" value="#"/><input type="hidden" name="custom" id="result_custom" value="comment"/><button type="submit">'+submitText+"</button></form>"),$("#generate-standard-payment-form").removeClass("d-none"),$(".merchant-qr-section").addClass("d-none");let e=$(this).attr("data-marchant");$("#merchant_id").val(e);let t=$(this).attr("data-marchantID");$("#merchant_main_id").val(t);let a=$(this).attr("data-merchantCurrencyCode");a&&$("#merchantCurrencyCode").html(a);let n=$(this).attr("data-merchantCurrencyId");$("#currency_id").val(n);let r=$(this).attr("data-currencyType");$("#currency_type").val(r),$("#merchantModal").modal("show")}else{let e=$(this).attr("data-client-id"),t=$(this).attr("data-client-secret");$("#client_id").val(e),$("#client_secret").val(t);let a=$(this).attr("data-merchantCurrencyId");$("#currency_id").val(a)}}),$(document).on("click",".update-express-merchant-qr-code",function(e){e.preventDefault();let t=$("#client_id").val(),a=$("#merchant_id").val(),n=$("#currency_id").val();executeExpressMerchantQrCode(t,a,n)}),$("#expressMerchantQrCodeModal").on("show.bs.modal",function(e){let t=$(e.relatedTarget).attr("data-clientId"),a=$(e.relatedTarget).attr("data-clientSecret"),n=$(e.relatedTarget).attr("data-merchantId"),r=$(e.relatedTarget).attr("data-merchantDefaultCurrencyId");$("#client_id").val(t),$("#client_secret").val(a),$("#merchant_id").val(n),$("#currency_id").val(r),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"GET",url:expressMerchantGetQrCodeUrl,dataType:"json",data:{merchantId:n}}).done(function(e){e.status&&($(".express-merchant-qr-div").removeClass("d-none"),$(".expressMerchantQrCodeImg").attr("src",e.imgSource))}).fail(function(e){Swal.fire(failedText,JSON.parse(e.responseText).message,"error").then(e=>{e.isConfirmed&&window.location.reload()})})}),$("#expressMerchantQrCodeModal").on("hidden.bs.modal",function(e){$(".express-merchant-qr-div").addClass("d-none")}),$(document).on("click","#qr-code-print-express",function(e){e.preventDefault();let t=$("#merchant_id").val(),a=SITE_URL+"/merchant/qr-code-print/"+t+"/express_merchant";$(this).attr("href",a),window.open($(this).attr("href"),"_blank")}),$("#click-to-copy").on("click",function(){$("#copiedMessage").css("color","green"),$("#copy-parent-div").css("opacity","1").delay(5e3,function(){$("#copy-parent-div").css("opacity","0")}),$("#result").removeAttr("disabled").select().attr("disabled","true"),document.execCommand("copy")}),$("#client_secret").on("focus",function(){$(this).select(),document.execCommand("copy"),$("#copy-parent-div-client-secret").addClass("show-copied"),setInterval(remove_copy_secret,5e3)}),$("#client_id").on("focus",function(){$(this).select(),document.execCommand("copy"),$("#copy-parent-div-client").addClass("show-copied"),setInterval(remove_copy,5e3)}),$("#copyClientIdBtn").on("click",function(){$("#client_id").select(),document.execCommand("copy"),$("#copy-parent-div-client").addClass("show-copied"),setInterval(remove_copy,5e3)}),$("#copyClientSecretBtn").on("click",function(){$("#client_secret").select(),document.execCommand("copy"),$("#copy-parent-div-client-secret").addClass("show-copied"),setInterval(remove_copy_secret,5e3)}),$(document).on("click","#qr-code-print-standard",function(e){e.preventDefault();let t=$("#merchant_main_id").val(),a=SITE_URL+"/merchant/qr-code-print/"+t+"/standard_merchant";$(this).attr("href",a),window.open($(this).attr("href"),"_blank")})}$(".main-containt").find("#merchantPayment").length&&$(document).ready(function(){let e=$("#status").val(),t=$("#currency").val(),a=$("#paymentMethod").val(),n=$("#merchant").val();""==startDate&&"all"==e&&"all"==t&&"all"==a&&"all"==n||$(".filter-panel").css("display","block"),$(".fil-btn").on("click",function(){$(this).find("img").toggle(),$(".filter-panel").slideToggle(300)})});