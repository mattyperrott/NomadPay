"use strict";function restrictNumberToPrefdecimalOnInput(e){let t=$.trim(e.value);if(t.length>0&&!isNaN(t))return e.value=digitCheck(t,8,tokenDecimals),e.value}if($(".content").find("#crypto-receive-create").length){var merchantAddress,userAddress,amount,userId;$("#user_id").select2({});var userAddressErrorFlag=!1,amountErrorFlag=!1;function checkSubmitBtn(){userAddressErrorFlag||amountErrorFlag?$("#admin-crypto-receive-submit-btn").attr("disabled",!0):$("#admin-crypto-receive-submit-btn").attr("disabled",!1)}function checkMerchantAmountValidity(e,t,r,n){var a=$("#user_id").val();e<tatumIoMinLimit?checkMinimumAmount(`${minAmount.replace(":x",tatumIoMinLimit+" "+n)}`):($(".amount-validation-error").text(""),userAddressErrorFlag=!1,amountErrorFlag=!1,checkSubmitBtn(),$.ajax({method:"GET",url:validateBalanceUrl,dataType:"json",data:{userId:a,network:n,amount:e,tokenAddress:tokenAddress,userAddress:r,tokenDecimals:tokenDecimals},beforeSend:function(){swal(pleaseWait,loading,{closeOnClickOutside:!1,closeOnEsc:!1,buttons:!1})}}).done(function(e){swal.close(),401==e.status&&($(".amount-validation-error").text(e.message),userAddressErrorFlag=!0,amountErrorFlag=!0,checkSubmitBtn())}).fail(function(e){swal({title:errorText,text:JSON.parse(e.responseText).exception,icon:"error",closeOnClickOutside:!1,closeOnEsc:!1})}))}function getUserNetworkAddressBalanceWithMerchantAddress(e){$.ajax({url:userBalanceWithMerchantAddressUrl,type:"get",dataType:"json",data:{network:network,user_id:e,tokenAddress:tokenAddress,tokenDecimals:tokenDecimals},beforeSend:function(){swal(pleaseWait,loading,{closeOnClickOutside:!1,closeOnEsc:!1,buttons:!1})}}).done(function(e){if(401==e.status)$(".amount-validation-error").text(e.message),userAddressErrorFlag=!0,amountErrorFlag=!0,checkSubmitBtn(),swal({title:errorText,text:e.message,icon:"error",closeOnClickOutside:!1,closeOnEsc:!1});else{$("#user-div").after(`<div class="form-group row" id="user-address-div">\n                    <label class="col-sm-3 control-label f-14 fw-bold text-end" for="user-address">${userCryptoAddress}</label>\n                    <div class="col-sm-6">\n                        <input type="text" class="form-control f-14" name="userAddress" id="user-address" value="${e.userAddress}"/>\n                    </div>\n                </div>`),$("#user-address-div").after(`<div class="form-group row" id="user-balance-div">\n                    <label class="col-sm-3 control-label f-14 fw-bold text-end" for="user-balance">${userCryptoBalance}</label>\n                    <div class="col-sm-6">\n                        <input type="text" class="form-control f-14" name="userBalance" id="user-balance" value="${e.userAddressBalance}"/>\n                         <span class="crypto-amount-validation-error"></span>\n                    </div>\n                </div>`),$("#user-balance-div").after(`<div class="form-group row" id="token-address-div">\n                    <label class="col-sm-3 control-label f-14 fw-bold text-end" for="token-address">${tokenLabel}</label>\n                    <div class="col-sm-6">\n                        <input type="text" class="form-control f-14" name="merchantTokenAddress" id="token-address" value="${e.tokenAddress}"/>\n                    </div>\n                </div>`),$("#token-address-div").after(`<div class="form-group row" id="user-token-balance-div">\n                    <label class="col-sm-3 control-label f-14 fw-bold text-end" for="user-token-balance">${usertokenBalance}</label>\n                    <div class="col-sm-6">\n                        <input type="text" class="form-control f-14" name="userBalance" id="user-balance" value="${e.tokenBalance}"/>\n                    </div>\n                </div>`),$("#user-token-balance-div").after(`<div class="form-group row" id="merchant-address-div">\n                    <label class="col-sm-3 control-label f-14 fw-bold text-end" for="merchant-address">${merchantCryptoAddress}</label>\n                    <div class="col-sm-6">\n                        <input type="text" class="form-control f-14" name="merchantAddress" id="merchant-address" value="${e.merchantAddress}"/>\n                    </div>\n                </div>`);var t=window.localStorage.getItem("previousReceivedUrl"),r=confirmationCryptoReceivedUrl,n=window.localStorage.getItem("crypto-received-amount");r==t&&null!=n?($("#merchant-address-div").after(`<div class="form-group row" id="amount-div">\n                        <label class="col-sm-3 control-label f-14 fw-bold text-end require" for="Amount">${cryptoReceivedAmount}</label>\n                        <div class="col-sm-6" id="amount-input-div">\n                            <input type="text" class="form-control f-14 amount" name="amount" placeholder="0.00000000" id="amount" value="${n}" onkeypress="return isNumberOrDecimalPointKey(this, event);" oninput="restrictNumberToPrefdecimalOnInput(this)" required data-value-missing="${requiredField}"/>\n                            <span class="amount-validation-error"></span>\n                        </div>\n                    </div>`),checkMerchantAmountValidity($(".amount").val().trim(),$("#merchant-address").val().trim(),$("#user-address").val().trim(),network),$("#admin-crypto-receive-submit-btn").attr("disabled",!1),$(".fa-spin").hide(),$("#admin-crypto-receive-submit-btn-text").html('Next&nbsp;<i class="fa fa-angle-right"></i>'),window.localStorage.removeItem("crypto-received-amount"),window.localStorage.removeItem("previousReceivedUrl")):$("#merchant-address-div").after(`<div class="form-group row" id="amount-div">\n                        <label class="col-sm-3 control-label f-14 fw-bold text-end require" for="Amount">${cryptoReceivedAmount}</label>\n                        <div class="col-sm-6" id="amount-input-div">\n                            <input type="text" class="form-control f-14 amount" name="amount" placeholder="${tatumIoMinLimit}" id="amount" onkeypress="return isNumberOrDecimalPointKey(this, event);" oninput="restrictNumberToPrefdecimalOnInput(this)" required data-value-missing="${requiredField}"/>\n                            <span class="amount-validation-error"></span>\n                        </div>\n                    </div>`),$(".amount-validation-error").after(`<div class="clearfix"></div>\n                    <small class="form-text text-muted f-12 amount-hint"><b>*${cryptoTransactionText}</b></small><br/>\n                    <small class="form-text text-muted f-12"><b>*${minWithdrawan.replace(":x",tatumIoMinLimit+" "+cryptoToken)}</b></small><br/>\n                `),$(".crypto-amount-validation-error").after(`<div class="clearfix"></div>\n                    <small class="form-text text-muted f-12"><b>*${minNetworkFee.replace(":x","10 "+network)}</b></small><br/>\n                    <small class="form-text text-muted f-12"><b>*${networkFeeText.replace(":x",network)}</b></small><br/>\n                `),$("#amount-div").after(`<div class="form-group row" id="submit-anchor-div">\n                    <label class="col-sm-3"></label>\n                    <div class="col-sm-6">\n                        <a href="${backButtonUrl}" class="btn btn-theme-danger"><span><i class="fa fa-angle-left"></i>&nbsp;${backButton}</span></a>\n                        <button type="submit" class="btn btn-theme pull-right" id="admin-crypto-receive-submit-btn">\n                            <i class="fa fa-spinner fa-spin d-none"></i>\n                            <span id="admin-crypto-receive-submit-btn-text">${nextButton}&nbsp;<i class="fa fa-angle-right"></i></span>\n                        </button>\n                    </div>\n                </div>`),$("#user-address, #user-balance, #merchant-address, #token-address").attr("readonly",!0),$(".amount-validation-error").text(""),userAddressErrorFlag=!1,amountErrorFlag=!1,checkSubmitBtn(),$("#amount").focus(),swal.close()}}).fail(function(e){swal({title:errorText,text:JSON.parse(e.responseText).exception,icon:"error",closeOnClickOutside:!1,closeOnEsc:!1})})}function checkMinimumAmount(e){$(".amount-validation-error").text(e),userAddressErrorFlag=!0,amountErrorFlag=!0,checkSubmitBtn()}$(document).on("change","#user_id",function(){$("#user-address-div, #user-balance-div, #merchant-address-div, #amount-div, #submit-anchor-div, #token-address-div, #user-token-balance-div").remove(),userId=$(this).val();let e=$("#user_id option:selected").text();$(".user-full-name").text(e),userId&&getUserNetworkAddressBalanceWithMerchantAddress(userId)}),$(document).on("keyup",".amount",$.debounce(700,function(){network=$("#network").val(),merchantAddress=$("#merchant-address").val().trim(),userAddress=$("#user-address").val().trim(),amount=$(this).val().trim(),amount.length>0&&!isNaN(amount)?checkMerchantAmountValidity(amount,merchantAddress,userAddress,network):($(".amount-validation-error").text(""),userAddressErrorFlag=!1,amountErrorFlag=!1,checkSubmitBtn())})),$(document).on("submit","#admin-crypto-receive-form",function(){window.localStorage.setItem("user_id",$("#user_id").val()),window.localStorage.setItem("crypto-received-amount",$(".amount").val().trim()),$("#admin-crypto-receive-submit-btn").attr("disabled",!0),$(".fa-spinner").removeClass("d-none"),$("#admin-crypto-receive-submit-btn-text").text(receiving),setTimeout(function(){$(".fa-spinner").addClass("d-none"),$("#admin-crypto-receive-submit-btn").attr("disabled",!1),$("#admin-crypto-receive-submit-btn-text").text(receive)},1e4)})}if($(".content").find("#crypto-receive-confirm").length){function cryptoReceiveConfirmBack(){window.localStorage.setItem("previousReceivedUrl",document.URL),window.location.replace(cryptoReceiveBackUrl)}$(document).on("click",".admin-user-crypto-receive-confirm-back-btn",function(e){e.preventDefault(),cryptoReceiveConfirmBack()}),$(document).on("submit","#admin-user-crypto-receive-confirm",function(){window.localStorage.removeItem("crypto-received-amount"),window.localStorage.removeItem("previousCrytoSentUrl"),window.localStorage.removeItem("user_id"),$("#admin-user-crypto-receive-confirm-btn").attr("disabled",!0),$(".fa-spinner").removeClass("d-none"),$("#admin-user-crypto-receive-confirm-btn-text").text(confirming),$(".admin-user-crypto-receive-confirm-back-btn").attr("disabled",!0).on("click",function(e){e.preventDefault()}),$(".admin-user-crypto-receive-confirm-back-link").on("click",function(e){e.preventDefault()}),setTimeout(function(){$(".fa-spinner").addClass("d-none"),$("#admin-user-crypto-receive-confirm-btn").attr("disabled",!1),$("#admin-user-crypto-receive-confirm-btn-text").text(confirm)},1e4)})}